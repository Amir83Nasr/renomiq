# پلن بهبود بخش‌های تغییر نام فایل و پوشه

## هدف کلی

بهبود دو بخش اصلی اپلیکیشن برای استفاده ساده‌تر، سریع‌تر و کاربردی‌تر:

1. **بخش تغییر نام فایل** - ساده‌سازی UI و بهبود UX
2. **تبدیل بخش تغییر نام سریال به تغییر نام پوشه** - تغییر کاربری از سریال به پوشه

---

## ۱. بهبود بخش تغییر نام فایل

### مشکلات فعلی

- لیست فایل‌ها فضای زیادی می‌گیرد
- فیلترها و جستجو در جاهای جداگانه قرار دارند
- پیش‌نمایش در پنل جداگانه است و نیاز به مقایسه ذهنی دارد
- Layout پیچیده با ستون‌های متعدد

### راه‌حل‌های پیشنهادی

#### A. لیست فایل فشرده و یکپارچه

```
┌─────────────────────────────────────────────────────────────┐
│ 🔍 جستجو...                            [همه ▼] [✓] [☐]    │
├─────────────────────────────────────────────────────────────┤
│ ☐ 📄 filename.txt              →   prefix_filename_01.txt  │
│ ☐ 📄 document.pdf              →   prefix_document_02.pdf  │
│ ☐ 🖼️  image.jpg    ⚠️ تداخل    →   —                       │
├─────────────────────────────────────────────────────────────┤
│ ۳ از ۱۵ فایل انتخاب شده    [معکوس] [همه فیلترشده]         │
└─────────────────────────────────────────────────────────────┘
```

**ویژگی‌ها:**

- پیش‌نمایش inline در کنار نام فعلی
- آیکون تایپ فایل
- نشانگر وضعیت (تداخل/بدون تغییر/تایید)
- جستجو و فیلتر اکستنشن در یک خط
- دکمه‌های انتخاب سریع

#### B. ویرایشگر قوانین ساده‌شده

```
┌─────────────────────────────────────────────────────────────┐
│ ⚡ قوانین تغییر نام                                         │
├─────────────────────────────────────────────────────────────┤
│ 🔤 جستجو و جایگزینی  [▲]                                    │
│    جستجو: [____________]  جایگزین: [____________]          │
├─────────────────────────────────────────────────────────────┤
│ 📝 پیشوند/پسوند  [▼]                                        │
├─────────────────────────────────────────────────────────────┤
│ 🔢 شماره‌گذاری  [▼]                                         │
│    [✓] فعال    رقم: [۲ ▼]                                  │
└─────────────────────────────────────────────────────────────┘
```

**ویژگی‌ها:**

- بخش‌های collapsible
- فقط بخش‌های فعال باز هستند
- پیش‌نمایش real-time

#### C. Layout یکپارچه

- Single column برای سادگی
- مراحل واضح: ۱) انتخاب پوشه → ۲) انتخاب فایل‌ها → ۳) قوانین → ۴) اعمال

---

## ۲. تبدیل بخش سریال به بخش پوشه

### تفاوت اصلی

| قابلیت | تغییر نام سریال (فعلی) | تغییر نام پوشه (جدید) |
| ------ | ---------------------- | --------------------- |
| ورودی  | فایل‌های ویدیویی سریال | زیرپوشه‌های یک پوشه   |
| منطق   | گروه‌بندی بر اساس قسمت | لیست ساده پوشه‌ها     |
| قوانین | الگوهای پیچیده سریال   | همان قوانین فایل      |
| خروجی  | نام‌گذاری S01E05       | تغییر نام پوشه‌ها     |

### UI پیشنهادی بخش پوشه

```
┌─────────────────────────────────────────────────────────────┐
│ 📁 انتخاب پوشه والد                                         │
│ [پوشه‌ای را انتخاب کنید...] [Browse]                       │
├─────────────────────────────────────────────────────────────┤
│ 📂 زیرپوشه‌ها (۵ مورد):                                     │
│                                                             │
│ 🔍 فیلتر...                           [✓] [☐] [معکوس]      │
│                                                             │
│ ☐ 📁 2023_old_reports          →   2023_reports_01         │
│ ☐ 📁 backup_temp               →   backup_02               │
│ ☐ 📁 project_v1                →   project_03              │
│ ☐ 📁 test_folder               →   test_04                 │
│ ☐ 📁 archived_old              →   archived_05             │
├─────────────────────────────────────────────────────────────┤
│ ⚡ قوانین تغییر نام  (همانند بخش فایل)                     │
└─────────────────────────────────────────────────────────────┘
```

### قابلیت‌های کلیدی

1. **انتخاب پوشه والد** - کاربر یک پوشه انتخاب می‌کند
2. **لیست زیرپوشه‌ها** - تمام زیرپوشه‌ها نمایش داده می‌شوند
3. **قوانین ساده** - همان قوانین فایل (جستجو/جایگزین، پیشوند/پسوند، شماره‌گذاری)
4. **پیش‌نمایش** - تغییرات قبل از اعمال
5. **اعمال** - تغییر نام واقعی پوشه‌ها

---

## ۳. تغییرات فایل‌ها

### فایل‌های جدید

```
components/
├── CompactFileList.tsx      # لیست فایل فشرده با inline preview
├── CompactFolderList.tsx    # لیست پوشه فشرده
├── CollapsibleRuleEditor.tsx # ویرایشگر قوانین تاشو
└── InlinePreview.tsx        # کامپوننت پیش‌نمایش inline

app/sections/
├── FileRenamerSection.tsx   # refactor از page.tsx
└── FolderRenamerSection.tsx # جایگزین SeriesRenamerSection

lib/services/
└── folder-service.ts        # سرویس لیست کردن زیرپوشه‌ها
```

### فایل‌های ویرایش شده

```
app/page.tsx                 # ساده‌سازی - استفاده از سctions جدید
lib/i18n/locales/fa.ts       # ترجمه‌های جدید
lib/i18n/locales/en.ts       # ترجمه‌های جدید
```

### فایل‌های حذف شده

```
app/sections/SeriesRenamerSection.tsx  # حذف
components/FileGroupList.tsx           # حذف
components/SeriesMetadataForm.tsx      # حذف
components/EpisodePatternEditor.tsx    # حذف
```

---

## ۴. اصول طراحی

### سادگی (Simplicity)

- هر بخش یک هدف مشخص داشته باشد
- حداقل کلیک برای انجام کار
- UI تمیز و بدون شلوغی

### یکپارچگی (Consistency)

- هر دو بخش ظاهر و رفتار مشابه داشته باشند
- قوانین تغییر نام یکسان باشند
- الگوهای UI یکسان استفاده شوند

### بازخورد (Feedback)

- پیش‌نمایش real-time
- وضعیت هر آیتم مشخص باشد
- پیام‌های موفقیت/خطا واضح

### کارایی (Efficiency)

- انتخاب سریع با کیبورد
- میانبرهای کاربردی
- عملیات گروهی ساده

---

## ۵. مراحل اجرا

### فاز ۱: کامپوننت‌های مشترک

1. ایجاد `CompactFileList` با پیش‌نمایش inline
2. ایجاد `CollapsibleRuleEditor`
3. ایجاد `CompactFolderList`

### فاز ۲: سرویس‌ها

1. ایجاد `folder-service.ts` برای لیست کردن زیرپوشه‌ها
2. افزودن تابع `listSubfolders` به TauriService

### فاز ۳: بخش‌های اصلی

1. Refactor `FileRenamerSection` با کامپوننت‌های جدید
2. ایجاد `FolderRenamerSection` جدید
3. به‌روزرسانی `page.tsx`

### فاز ۴: ترجمه‌ها

1. به‌روزرسانی `fa.ts`
2. به‌روزرسانی `en.ts`
3. اضافه کردن کلیدهای مربوط به پوشه

### فاز ۵: پاکسازی

1. حذف کامپوننت‌های سریال
2. حذف تایپ‌های مربوط به سریال
3. تست نهایی

---

## نتیجه نهایی

بعد از این تغییرات، اپلیکیشن دارای دو بخش ساده و کاربردی خواهد بود:

1. **تغییر نام فایل** - برای تغییر نام دسته‌جمعی فایل‌ها در یک پوشه
2. **تغییر نام پوشه** - برای تغییر نام دسته‌جمعی زیرپوشه‌ها

هر دو با UI یکپارچه، ساده و کارآمد.
